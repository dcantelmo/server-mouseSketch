CREATE TABLE IF NOT EXISTS user(
                pid INTEGER PRIMARY KEY AUTOINCREMENT,
                nickname TEXT UNIQUE NOT NULL COLLATE NOCASE,
                email TEXT UNIQUE NOT NULL COLLATE NOCASE,
                password text,
                av_path,
                FOREIGN KEY (av_path) REFERENCES image(path)
                ON DELETE SET NULL
                ON UPDATE CASCADE)

CREATE TABLE IF NOT EXISTS image(
                pid INTEGER PRIMARY KEY AUTOINCREMENT,
                name TEXT COLLATE NOCASE,
                author TEXT COLLATE NOCASE,
                path TEXT UNIQUE,
                CONSTRAINT AU_Image UNIQUE (author,name)
                FOREIGN KEY (author) REFERENCES user(nickname))